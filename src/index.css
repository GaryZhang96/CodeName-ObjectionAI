@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Lex Machina - 像素风主题样式
   ============================================ */

/* 基础重置与全局样式 */
* {
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

html {
  font-size: 16px;
}

body {
  @apply bg-pixel-black text-pixel-light font-pixel-body;
  overflow: hidden;
  cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Crect fill='%23ffd700' x='0' y='0' width='4' height='4'/%3E%3Crect fill='%23ffd700' x='4' y='4' width='4' height='4'/%3E%3Crect fill='%23ffd700' x='8' y='8' width='4' height='4'/%3E%3Crect fill='%23ffd700' x='0' y='4' width='4' height='12'/%3E%3C/svg%3E"), auto;
}

/* 像素风滚动条 */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  @apply bg-pixel-dark;
  border: 2px solid #333;
}

::-webkit-scrollbar-thumb {
  @apply bg-pixel-gold;
  border: 2px solid #333;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-amber-glow;
}

/* ============================================
   像素风组件基础类
   ============================================ */

@layer components {
  /* 像素风按钮 */
  .pixel-btn {
    @apply px-6 py-3 font-pixel-title text-sm uppercase tracking-wider
           bg-court-accent text-pixel-gold
           border-4 border-pixel-black
           shadow-pixel
           transition-all duration-100
           hover:translate-x-[-2px] hover:translate-y-[-2px]
           hover:shadow-pixel-lg
           active:translate-x-[2px] active:translate-y-[2px]
           active:shadow-none
           disabled:opacity-50 disabled:cursor-not-allowed
           disabled:hover:translate-x-0 disabled:hover:translate-y-0
           disabled:hover:shadow-pixel;
  }

  .pixel-btn-danger {
    @apply pixel-btn bg-pixel-red text-white;
  }

  .pixel-btn-success {
    @apply pixel-btn bg-pixel-green text-pixel-black;
  }

  /* 像素风面板/卡片 */
  .pixel-panel {
    @apply bg-court-secondary border-4 border-pixel-gold
           shadow-pixel-lg p-4;
  }

  .pixel-panel-dark {
    @apply bg-pixel-dark border-4 border-pixel-gray
           shadow-pixel p-4;
  }

  /* 像素风输入框 */
  .pixel-input {
    @apply w-full px-4 py-3 font-pixel-body text-lg
           bg-pixel-dark text-pixel-light
           border-4 border-pixel-gray
           focus:border-pixel-gold focus:outline-none
           placeholder:text-pixel-gray;
  }

  /* 像素风标题 */
  .pixel-title {
    @apply font-pixel-title text-pixel-gold 
           drop-shadow-[2px_2px_0px_rgba(0,0,0,1)]
           tracking-wider;
  }

  /* 扫描线效果 */
  .scanline-overlay {
    @apply pointer-events-none fixed inset-0 z-50;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.1) 0px,
      rgba(0, 0, 0, 0.1) 1px,
      transparent 1px,
      transparent 2px
    );
  }

  /* CRT屏幕效果 */
  .crt-effect {
    @apply relative;
  }

  .crt-effect::before {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    background: radial-gradient(
      ellipse at center,
      transparent 0%,
      rgba(0, 0, 0, 0.3) 100%
    );
  }

  /* 发光文字效果 */
  .glow-text {
    text-shadow: 
      0 0 5px currentColor,
      0 0 10px currentColor,
      0 0 20px currentColor;
  }

  /* 打字机效果容器 */
  .typewriter {
    overflow: hidden;
    white-space: nowrap;
    border-right: 3px solid;
    animation: 
      typing 3s steps(40, end),
      blink-caret 0.75s step-end infinite;
  }

  @keyframes blink-caret {
    from, to { border-color: transparent; }
    50% { border-color: currentColor; }
  }

  /* 角色立绘容器 */
  .character-portrait {
    @apply relative overflow-hidden;
    image-rendering: pixelated;
  }

  .character-portrait img {
    @apply w-full h-full object-contain;
    image-rendering: pixelated;
  }

  /* 对话框气泡 */
  .speech-bubble {
    @apply relative pixel-panel;
  }

  .speech-bubble::after {
    content: '';
    @apply absolute w-0 h-0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-top: 12px solid theme('colors.pixel.gold');
    bottom: -12px;
    left: 20px;
  }

  /* 陪审团成员格子 */
  .jury-cell {
    @apply w-10 h-10 flex items-center justify-center
           border-2 border-pixel-gray bg-pixel-dark
           text-2xl transition-all duration-300;
  }

  .jury-cell.positive {
    @apply border-pixel-green bg-green-900/30;
  }

  .jury-cell.negative {
    @apply border-pixel-red bg-red-900/30;
  }

  /* 证据卡片 */
  .evidence-card {
    @apply pixel-panel-dark cursor-pointer
           hover:border-pixel-gold hover:scale-105
           transition-all duration-200;
  }

  .evidence-card.selected {
    @apply border-pixel-gold bg-court-accent;
  }

  /* 情绪指示器 */
  .emotion-indicator {
    @apply inline-block px-2 py-1 text-xs font-pixel-title
           border-2 rounded;
  }

  .emotion-indicator.calm {
    @apply border-pixel-blue bg-blue-900/50 text-blue-300;
  }

  .emotion-indicator.nervous {
    @apply border-yellow-500 bg-yellow-900/50 text-yellow-300;
  }

  .emotion-indicator.angry {
    @apply border-pixel-red bg-red-900/50 text-red-300;
  }

  .emotion-indicator.broken {
    @apply border-purple-500 bg-purple-900/50 text-purple-300 animate-pulse;
  }
}

/* ============================================
   动画效果
   ============================================ */

@layer utilities {
  /* 异议！震动效果 */
  .objection-shake {
    animation: objection-shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
  }

  @keyframes objection-shake {
    10%, 90% { transform: translate3d(-2px, 0, 0); }
    20%, 80% { transform: translate3d(4px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-8px, 0, 0); }
    40%, 60% { transform: translate3d(8px, 0, 0); }
  }

  /* 渐入动画 */
  .fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* 从下方滑入 */
  .slide-up {
    animation: slideUp 0.3s ease-out;
  }

  @keyframes slideUp {
    from { 
      opacity: 0;
      transform: translateY(20px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* 闪烁警告 */
  .warning-flash {
    animation: warningFlash 0.5s ease-in-out infinite;
  }

  @keyframes warningFlash {
    0%, 100% { 
      background-color: transparent; 
    }
    50% { 
      background-color: rgba(255, 68, 68, 0.3); 
    }
  }

  /* 金色脉冲 */
  .gold-pulse {
    animation: goldPulse 2s ease-in-out infinite;
  }

  @keyframes goldPulse {
    0%, 100% {
      box-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
    }
    50% {
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
    }
  }
}

/* ============================================
   响应式调整
   ============================================ */

@media (max-width: 768px) {
  .pixel-btn {
    @apply px-4 py-2 text-xs;
  }

  .pixel-title {
    @apply text-sm;
  }
}

